[Вопросы для собеседования](README.md)


# Spring_Cloud
+ [Что такое Spring Cloud?](#что-такое-Spring-Cloud?)
+ [Что значат Service Registration и Discovery? Как они реализованы в Spring Cloud?](#что-значат-Service-Registration-и-Discovery?-Как-они-реализованы-в-Spring-Cloud?)
+ [Что значит балансировка нагрузки? Как она реализована в Spring Cloud?](#что-значит-балансировка-нагрузки?-Как-она-реализована-в-Spring-Cloud?)
+ [Что такое Hystrix? Как он обеспечивает отказоустойчивость?](#что-такое-Hystrix?-Как-он-обеспечивает-отказоустойчивость?)
+ [Что такое Netflix Feign? Каковы его преимущества?](#что-такое-Netflix-Feign?-Каковы-его-преимущества?)
+ [Что такое Spring Cloud Bus? Для чего он нужен?](#что-такое-Spring-Cloud-Bus?-Для-чего-он-нужен?)

## Что такое Spring Cloud?
Spring Cloud – это проект, который позволяет создавать распределенные приложения с микросервисной архитектурой. Он упрощает подключение к сервисам и получение возможностей окружения в облачных платформах.
Используются следующие основные концепции:

1. Cloud Connector: Интерфейс, через который можно реализовать облачный провайдер, чтобы дать возможность библиотекам работать с облачной платформой
2. Service Connector: Объект, подобный javax.sql.DataSource, представляющий собой соединение как сервис
3. Service information: Информация о сервисе - хост, порт, параметры доступа
4. Application information: Информация о приложении и сведения о подключенных библиотеках

Spring Cloud нужен для автоматизации разворачивания сервисов на облачных платформах, типа AWS, Azure, GCP и прочем. 
Обычно он нужен тогда, когда система должна автоматически реагировать на изменение окружения, нагрузки и разворачивать новые инстансы.

[к оглавлению](#Spring_Cloud)

## Что значат Service Registration и Discovery? Как они реализованы в Spring Cloud?
В распределенной системе (Distributed System), услуги (приложения) должны зарегистрироваться с  "Service Registration" (Регистрация услуг) чтобы они смогли найти друг друга.
Есть много технологий, чтобы вы получили  "Service Registration", Spring Cloud предоставляет вам следующие технологические решения:
1. Eureka
2. Zookeeper
3. Cloud Foundry
4. Consul

В микросервисной архитектуре сервисам постоянно приходиться общаться. Для выполнения запросов сервису необходимо знать о расположении других сервисов. Мы можем предоставить ему эту информацию на этапе развёртывания.
Решением именно этой проблемы служит механизм обнаружения сервисов (Service Discovery). Суть такая: мы заводим специальный сервер, который будет выполнять задачи по сбору, хранению и распространению актуальной информации о существующих в нашей системе сервисах.
Теперь, когда поднимается любой из сервисов, он сообщает service-discovery сервису свои IP адрес и порт. 
Ключевым компонентом при таком подходе является Service registry — база данных микросервисов, их инстансов и сетевых расположений.
Service Discovery хранит эти данные и по запросу может сообщать одним сервисам местоположение других. Сами же сервисы периодически запрашивают у него нужную информацию и отправляют данные о своей активности.
Таким образом, когда в инфраструктуре появляются или исчезают экземпляры сервисов, другие сервисы динамически узнают об этом, и необходимость в их перезапуске исчезает.
Для реализации Service Discovery также может использоваться Eureka.

[к оглавлению](#Spring_Cloud)

## Что значит балансировка нагрузки? Как она реализована в Spring Cloud?
Представьте, что у вас есть распределенная система, которая имеет много услуг (приложений) работающих на разных компьютерах. Но если количество пользователей большое, услуга (приложение) обычно cоздает разные реплики (replica), каждая реплика работает на отдельном компьютере. В это время появляется  "Load Balancer" (Балансировка нагрузки), которая помогает распределять входящий траффик (incomming traffic) равно между серверами.

Традиционно, Балансировка нагрузки (Load Balancer) это компоненты расположенные на стороне сервера (Server Side). Когда запросы поступают от Client они придут к балансировке нагрузки, и она определит один сервер для этого запроса. Самый простой алгоритм используемый балансировкой нагрузки это случайное распределение. Почти все балансировки нагрузки являются аппаратным обеспечением, интегрирующим программным обеспечением, которые контролируют балансировку нагрузки (load balancing).

Когда балансирвока нагрузки находится на стороне  Клиента (Client side) она сама решает к какому серверу отправить запрос, основываясь на некоторых критериях.

На самом деле сервера имеют разницу, они отличаются друг от друга по следющим критериям:
1. Доступность (Availability): Не все сервера работают все время.
2. Производительность (Performance): Скорость серверов разная.
3. География: Сервера расположены в разных местах, например расположены в разных странах. Они могут быть рядом с одним Клиентом, но далеко от других.

Ribbon это часть семьи  Netflix Open Source Software (Netflix OSS). Является библиотекой предоставляющей балансировку на клиентской стороне. Так как он является частью семьи  Netflix то он может автоматически взаимодействовать с  Netflix Service Discovery (Eureka).

[к оглавлению](#Spring_Cloud)

## Что такое Hystrix? Как он обеспечивает отказоустойчивость?
Hystrix — это имплементация паттерна Circuit Breaker — предохранителя, который дает контроль над задержками и ошибками при вызовах по сети. Основная идея состоит в том, чтобы остановить каскадный отказ в распределенной системе, состоящей из большого числа компонентов. Это позволяет отдавать ошибку как можно быстрее, не задерживаясь при запросе к зависшему сервису (давая ему восстановится).

Помимо контроля за размыканием цепи, Hystrix позволяет определить fallback-метод, который будет вызван при неуспешном вызове. Тем самым можно отдавать дефолтный ответ, сообщение об ошибке, и др.

На каждый запрос Hystrix генерирует набор метрик (таких как скорость выполнения, результат), что позволяет анализировать общее состояние системы. 
Метрики, которые генерит Hystrix, можно отдавать наружу, включив в класспас зависимость spring-boot-starter-actuator. Помимо прочих интересных вещей, будет выставлен специальный эндпоинт — /hystrix.stream. Этот стрим можно визуализировать с помощью Hystrix dashboard, о котором мы подробно поговорим ниже. Для включения Hystrix Dashboard понадобится зависимость spring-cloud-starter-hystrix-dashboard и аннотация @EnableHystrixDashboard. Hystrix Dashboard можно натравить на стрим любого микросервиса для наблюдения живой картины происходящего в этом конкретном сервисе.

[к оглавлению](#Spring_Cloud)

## Что такое Netflix Feign? Каковы его преимущества?
Feign — простой и гибкий http-клиент, который нативно интегрирован с Ribbon и Hystrix. Проще говоря, имея в класспасе зависимость spring-cloud-starter-feign и активировав клиент аннотацией @EnableFeignClients, вы получаете полный набор из балансировщика, предохранителя и клиента, готовый к бою с разумной дефолтной конфигурацией.
Все что нужно — объявить интерфейс. 

[к оглавлению](#Spring_Cloud)

## Что такое Spring Cloud Bus? Для чего он нужен?
Spring Cloud Bus использует облегченный брокер сообщений для связи узлов распределенной системы. 
Основное использование - передача изменений конфигурации или другой управляющей информации.
Проект использует брокера AMQP в качестве транспорта, но вместо RabbitMQ можно использовать Apache Kafka или Redis.

[к оглавлению](#Spring_Cloud)

[Вопросы для собеседования](README.md)
